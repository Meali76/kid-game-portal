<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#9333ea">
    <meta name="description" content="Monster Munch - A fun typing game for kids">
    <title>Monster Munch - Kids Typing Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { -webkit-tap-highlight-color: transparent; }
        body { touch-action: manipulation; overscroll-behavior: none; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .animate-bounce { animation: bounce 1s infinite; }
        input { font-size: 16px !important; }
    </style>
</head>
<body class="m-0 p-0">
    <div id="app"></div>

    <script>
        const Storage = {
            get: () => JSON.parse(localStorage.getItem('monsterMunchScores') || '[]'),
            set: (scores) => localStorage.setItem('monsterMunchScores', JSON.stringify(scores))
        };

        let state = {
            level: 1,
            score: 0,
            currentWord: '',
            userInput: '',
            timeLeft: 30,
            gameActive: false,
            streak: 0,
            showSuccess: false,
            totalWords: 0,
            playerName: '',
            showNameInput: false,
            highScores: Storage.get(),
            showLeaderboard: false,
            monster: ['üê±', 'üê∂', 'ü¶Å', 'üêØ', 'üê∏', 'ü¶ñ', 'üê≤', 'üëæ', 'ü§ñ', 'üëª'][Math.floor(Math.random() * 10)]
        };

        const levels = {
            1: { name: 'Baby Monster', words: ['cat', 'dog', 'sun', 'cup', 'car', 'hat', 'pig', 'bus', 'egg', 'bat'], time: 30 },
            2: { name: 'Tiny Terror', words: ['apple', 'happy', 'pizza', 'smile', 'bunny', 'jelly', 'robot', 'tiger', 'music', 'super'], time: 25 },
            3: { name: 'Growing Goblin', words: ['dinosaur', 'elephant', 'birthday', 'computer', 'backpack', 'colorful', 'treasure', 'adventure'], time: 25 },
            4: { name: 'Mega Monster', words: ['incredible', 'wonderful', 'adventure', 'delicious', 'mysterious', 'spectacular', 'playground', 'skateboard'], time: 20 },
            5: { name: 'Ultimate Beast', words: ['extraordinary', 'enthusiastic', 'magnificent', 'unbelievable', 'neighborhood', 'imagination', 'kaleidoscope'], time: 20 }
        };

        let timer = null;

        function getRandomWord() {
            const wordList = levels[state.level].words;
            return wordList[Math.floor(Math.random() * wordList.length)];
        }

        function startGame() {
            state.score = 0;
            state.streak = 0;
            state.totalWords = 0;
            state.timeLeft = levels[state.level].time;
            state.gameActive = true;
            state.showNameInput = false;
            state.showLeaderboard = false;
            state.currentWord = getRandomWord();
            state.userInput = '';
            
            clearInterval(timer);
            timer = setInterval(() => {
                if (state.timeLeft > 0) {
                    state.timeLeft--;
                    render();
                } else {
                    clearInterval(timer);
                    state.gameActive = false;
                    state.showNameInput = true;
                    render();
                }
            }, 1000);
            
            render();
            setTimeout(() => document.getElementById('gameInput')?.focus(), 100);
        }

        function handleInput(e) {
            const value = e.target.value.toLowerCase();
            state.userInput = value;
            render();

            if (value === state.currentWord) {
                state.score += state.currentWord.length * 10 + state.streak * 5;
                state.streak++;
                state.totalWords++;
                state.showSuccess = true;
                state.currentWord = getRandomWord();
                state.userInput = '';
                render();
                
                setTimeout(() => {
                    state.showSuccess = false;
                    render();
                }, 300);
                
                setTimeout(() => document.getElementById('gameInput')?.focus(), 50);
            }
        }

        function saveScore() {
            if (!state.playerName.trim()) {
                alert('Please enter your name! üòä');
                return;
            }

            const newScore = {
                name: state.playerName.trim(),
                score: state.score,
                level: state.level,
                words: state.totalWords,
                date: new Date().toLocaleDateString()
            };

            state.highScores = [...state.highScores, newScore]
                .sort((a, b) => b.score - a.score)
                .slice(0, 10);

            Storage.set(state.highScores);
            state.showNameInput = false;
            state.showLeaderboard = true;
            state.playerName = '';
            render();
        }

        function skipSaveScore() {
            state.showNameInput = false;
            state.playerName = '';
            render();
        }

        function render() {
            const app = document.getElementById('app');
            const isPlaying = state.gameActive;
            const showName = state.showNameInput;
            const showBoard = state.showLeaderboard;

            app.innerHTML = `
                <div class="min-h-screen bg-gradient-to-br from-purple-400 via-pink-400 to-blue-400 p-4 flex items-center justify-center">
                    <div class="max-w-2xl w-full">
                        <div class="bg-white rounded-t-3xl p-6 shadow-lg">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h1 class="text-4xl font-bold text-purple-600 mb-2">Monster Munch</h1>
                                    <p class="text-gray-600">Type fast to feed the monster!</p>
                                </div>
                                <div class="text-6xl ${isPlaying ? 'animate-bounce' : ''}">${state.monster}</div>
                            </div>
                        </div>

                        ${!isPlaying && !showName && !showBoard ? `
                        <div class="bg-white p-6 shadow-lg">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                                ‚≠ê Choose Your Level
                            </h2>
                            <div class="grid grid-cols-1 gap-3">
                                ${Object.entries(levels).map(([lvl, data]) => `
                                    <button onclick="state.level = ${lvl}; render();" class="p-4 rounded-xl font-bold text-left transition-all ${
                                        state.level == lvl
                                            ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg'
                                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                    }">
                                        <div class="flex justify-between items-center">
                                            <span>Level ${lvl}: ${data.name}</span>
                                            <span class="text-sm">‚è±Ô∏è ${data.time}s</span>
                                        </div>
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                        ` : ''}

                        ${isPlaying ? `
                        <div class="bg-white p-6 shadow-lg">
                            <div class="grid grid-cols-3 gap-4 mb-4">
                                <div class="bg-gradient-to-br from-green-400 to-green-500 p-4 rounded-xl text-white text-center">
                                    <div class="text-3xl font-bold">${state.score}</div>
                                    <div class="text-sm">Score</div>
                                </div>
                                <div class="bg-gradient-to-br from-orange-400 to-red-500 p-4 rounded-xl text-white text-center">
                                    <div class="text-3xl font-bold">${state.timeLeft}</div>
                                    <div class="text-sm">Time</div>
                                </div>
                                <div class="bg-gradient-to-br from-blue-400 to-purple-500 p-4 rounded-xl text-white text-center">
                                    <div class="text-3xl font-bold">${state.streak}</div>
                                    <div class="text-sm">Streak üî•</div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r ${state.showSuccess ? 'from-green-300 to-green-400' : 'from-yellow-200 to-yellow-300'} p-8 rounded-2xl text-center mb-4 transition-all">
                                <div class="text-5xl font-bold text-gray-800 mb-2 tracking-wider">
                                    ${state.currentWord}
                                </div>
                                <div class="text-sm text-gray-600">Type this word!</div>
                            </div>

                            <input
                                id="gameInput"
                                type="text"
                                value="${state.userInput}"
                                oninput="handleInput(event)"
                                class="w-full p-6 text-3xl text-center border-4 border-purple-400 rounded-2xl focus:outline-none focus:border-purple-600 font-bold"
                                placeholder="Type here..."
                                autocomplete="off"
                                autocapitalize="off"
                            />

                            ${state.userInput ? `
                            <div class="mt-4 text-center">
                                ${state.currentWord.split('').map((letter, idx) => `
                                    <span class="text-2xl font-bold ${
                                        state.userInput[idx] === letter ? 'text-green-500' :
                                        state.userInput[idx] ? 'text-red-500' : 'text-gray-300'
                                    }">${letter}</span>
                                `).join('')}
                            </div>
                            ` : ''}
                        </div>
                        ` : ''}

                        <div class="bg-white rounded-b-3xl p-6 shadow-lg">
                            ${showName ? `
                            <div class="text-center mb-6">
                                <div class="text-6xl mb-4">üéâ</div>
                                <h2 class="text-3xl font-bold text-purple-600 mb-4">Great Job!</h2>
                                <p class="text-5xl font-bold text-gray-800 mb-2">${state.score} points</p>
                                <p class="text-gray-600 mb-6">Total Words: ${state.totalWords} | Best Streak: ${state.streak} üî•</p>
                                
                                <div class="max-w-md mx-auto mb-4">
                                    <label class="block text-left text-gray-700 font-bold mb-2">
                                        Enter your name to save your score:
                                    </label>
                                    <input
                                        id="nameInput"
                                        type="text"
                                        value="${state.playerName}"
                                        oninput="state.playerName = this.value"
                                        onkeypress="if(event.key==='Enter') saveScore()"
                                        class="w-full p-4 text-xl border-4 border-purple-400 rounded-xl focus:outline-none focus:border-purple-600 font-bold text-center"
                                        placeholder="Your name..."
                                        maxlength="20"
                                    />
                                </div>

                                <div class="flex gap-3 justify-center">
                                    <button onclick="saveScore()" class="px-8 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-bold text-lg hover:scale-105 transition-all shadow-lg">
                                        üíæ Save Score
                                    </button>
                                    <button onclick="skipSaveScore()" class="px-8 py-4 bg-gray-300 text-gray-700 rounded-xl font-bold text-lg hover:bg-gray-400 transition-all">
                                        Skip
                                    </button>
                                </div>
                            </div>
                            ` : ''}

                            ${showBoard ? `
                            <div class="mb-6">
                                <h2 class="text-3xl font-bold text-purple-600 mb-4 text-center flex items-center justify-center gap-2">
                                    üèÜ Top Scores
                                </h2>
                                <div class="space-y-2 mb-6">
                                    ${state.highScores.length === 0 ? `
                                        <p class="text-center text-gray-500 py-8">No scores yet. Be the first! üåü</p>
                                    ` : state.highScores.map((entry, idx) => `
                                        <div class="p-4 rounded-xl flex items-center justify-between ${
                                            idx === 0 ? 'bg-gradient-to-r from-yellow-300 to-yellow-400' :
                                            idx === 1 ? 'bg-gradient-to-r from-gray-300 to-gray-400' :
                                            idx === 2 ? 'bg-gradient-to-r from-orange-300 to-orange-400' : 'bg-gray-100'
                                        }">
                                            <div class="flex items-center gap-4">
                                                <span class="text-2xl font-bold w-8">
                                                    ${idx === 0 ? 'ü•á' : idx === 1 ? 'ü•à' : idx === 2 ? 'ü•â' : `${idx + 1}.`}
                                                </span>
                                                <div>
                                                    <div class="font-bold text-lg">${entry.name}</div>
                                                    <div class="text-sm text-gray-600">
                                                        Level ${entry.level} ‚Ä¢ ${entry.words} words ‚Ä¢ ${entry.date}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="text-2xl font-bold text-purple-600">${entry.score}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                            ` : ''}

                            <div class="flex gap-3">
                                <button onclick="startGame()" ${isPlaying ? 'disabled' : ''} class="flex-1 py-6 rounded-2xl font-bold text-2xl transition-all ${
                                    isPlaying ? 'bg-gray-300 text-gray-500 cursor-not-allowed' :
                                    'bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:scale-105 shadow-lg'
                                }">
                                    ${isPlaying ? 'üéÆ Playing...' : state.timeLeft === 0 || showBoard ? 'üîÑ Play Again' : '‚ñ∂Ô∏è Start Game'}
                                </button>
                                
                                ${!isPlaying && state.highScores.length > 0 && !showBoard ? `
                                    <button onclick="state.showLeaderboard = true; render();" class="px-6 py-6 bg-gradient-to-r from-yellow-400 to-orange-400 text-white rounded-2xl font-bold text-xl hover:scale-105 transition-all shadow-lg">
                                        üèÜ
                                    </button>
                                ` : ''}
                            </div>
                        </div>

                        ${!isPlaying && !showName && !showBoard && state.timeLeft !== 0 ? `
                        <div class="bg-white rounded-3xl p-6 mt-4 shadow-lg">
                            <h3 class="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                                ‚ö° How to Play
                            </h3>
                            <ul class="space-y-2 text-gray-700">
                                <li>‚ú® Type the word shown on screen</li>
                                <li>‚ö° Type fast to beat the timer</li>
                                <li>üî• Build streaks for bonus points</li>
                                <li>üéØ Longer words = more points</li>
                                <li>üèÜ Try all 5 levels from easy to ultimate!</li>
                            </ul>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `;

            if (showName) {
                setTimeout(() => document.getElementById('nameInput')?.focus(), 100);
            }
        }

        render();
    </script>
</body>
</html>
